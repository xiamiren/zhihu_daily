{"remainingRequest":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\pages\\Person.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\pages\\Person.vue","mtime":1658978959151},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\babel.config.js","mtime":1658239012002},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1658554939499},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\babel-loader\\lib\\index.js","mtime":1658554870645},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1658554939499},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1658554910597}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCBOYXYgZnJvbSAiQC9jb21wb25lbnRzL05hdi52dWUiOwppbXBvcnQgeyBvbkJlZm9yZU1vdW50LCBjb21wdXRlZCB9IGZyb20gInZ1ZSI7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gInZ1ZS1yb3V0ZXIiOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gInZ1ZXgiOwppbXBvcnQgeyBUb2FzdCB9IGZyb20gInZhbnQiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTmF2OiBOYXYKICB9LAogIG5hbWU6ICJQZXJzb24iLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CgogICAgdmFyIHNpZ25vdXQgPSBmdW5jdGlvbiBzaWdub3V0KCkgewogICAgICBUb2FzdCgi5bCP5Li777yM5oKo5bey57uP5a6J5YWo6YCA5Ye6fiIpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidG9rZW4iKTsKICAgICAgc3RvcmUuY29tbWl0KCJjaGFuZ2VJc0xvZ2luIiwgbnVsbCk7CiAgICAgIHN0b3JlLmNvbW1pdCgiY2hhbmdlSW5mbyIsIG51bGwpOwogICAgICBzdG9yZS5jb21taXQoJ2NoYW5nZVN0b3JlTGlzdCcsIG51bGwpOwogICAgICByb3V0ZXIucmVwbGFjZSgiL2xvZ2luIik7CiAgICB9OyAvLyDorqHnrpflsZ7mgKd2dWV45Lit55qE55So5oi355qE5omA5pyJ5L+h5oGvCgoKICAgIHZhciBpbmZvID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3N0b3JlJHN0YXRlID0gc3RvcmUuc3RhdGUsCiAgICAgICAgICBpc0xvZ2luID0gX3N0b3JlJHN0YXRlLmlzTG9naW4sCiAgICAgICAgICBpbmZvID0gX3N0b3JlJHN0YXRlLmluZm87CgogICAgICBpZiAoaXNMb2dpbiAmJiBpbmZvKSB7CiAgICAgICAgcmV0dXJuIGluZm87CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSk7IC8vIOa4suafk+S5i+WJjeiOt+W+l+eUqOaIt+eahCBpc0xvZ2luIC8gaW5mb++8jOW5tuWtmOWCqOWIsHZ1ZXjkuK0KCiAgICBvbkJlZm9yZU1vdW50KGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zdG9yZSRzdGF0ZTIgPSBzdG9yZS5zdGF0ZSwKICAgICAgICAgIGlzTG9naW4gPSBfc3RvcmUkc3RhdGUyLmlzTG9naW4sCiAgICAgICAgICBpbmZvID0gX3N0b3JlJHN0YXRlMi5pbmZvOwoKICAgICAgaWYgKGlzTG9naW4gPT09IG51bGwpIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnY2hhbmdlQXN5bmNJc0xvZ2luJyk7CiAgICAgIH0KCiAgICAgIGlmIChpbmZvID09PSBudWxsKSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ2NoYW5nZUFzeW5jSW5mbycpOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIHNpZ25vdXQ6IHNpZ25vdXQsCiAgICAgIGluZm86IGluZm8KICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\pages\\Person.vue"],"names":[],"mappings":";;AAaA,OAAO,GAAP,MAAgB,sBAAhB;AACA,SAAS,aAAT,EAAwB,QAAxB,QAAwC,KAAxC;AACA,SAAS,SAAT,QAA0B,YAA1B;AACA,SAAS,QAAT,QAAyB,MAAzB;AACA,SAAS,KAAT,QAAsB,MAAtB;AAEA,eAAe;AACb,EAAA,UAAU,EAAE;AAAE,IAAA,GAAE,EAAF;AAAF,GADC;AAEb,EAAA,IAAI,EAAE,QAFO;AAGb,EAAA,KAHa,mBAGL;AACN,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,MAAK,GAAI,SAAS,EAAxB;;AACA,QAAM,OAAM,GAAI,SAAV,OAAU,GAAM;AACpB,MAAA,KAAK,CAAC,aAAD,CAAL;AACA,MAAA,YAAY,CAAC,UAAb,CAAwB,OAAxB;AACA,MAAA,KAAK,CAAC,MAAN,CAAa,eAAb,EAA8B,IAA9B;AACA,MAAA,KAAK,CAAC,MAAN,CAAa,YAAb,EAA2B,IAA3B;AACA,MAAA,KAAK,CAAC,MAAN,CAAa,iBAAb,EAAgC,IAAhC;AACA,MAAA,MAAM,CAAC,OAAP,CAAe,QAAf;AACD,KAPD,CAHM,CAWN;;;AACA,QAAI,IAAG,GAAI,QAAQ,CAAC,YAAM;AACxB,yBAAuB,KAAK,CAAC,KAA7B;AAAA,UAAM,OAAN,gBAAM,OAAN;AAAA,UAAe,IAAf,gBAAe,IAAf;;AACA,UAAG,OAAM,IAAK,IAAd,EAAoB;AAClB,eAAO,IAAP;AACF;;AACA,aAAO,IAAP;AACD,KANkB,CAAnB,CAZM,CAoBN;;AACA,IAAA,aAAa,CAAC,YAAM;AAClB,0BAAsB,KAAK,CAAC,KAA5B;AAAA,UAAK,OAAL,iBAAK,OAAL;AAAA,UAAc,IAAd,iBAAc,IAAd;;AACA,UAAG,OAAM,KAAM,IAAf,EAAqB;AACnB,QAAA,KAAK,CAAC,QAAN,CAAe,oBAAf;AACF;;AACA,UAAG,IAAG,KAAM,IAAZ,EAAkB;AAChB,QAAA,KAAK,CAAC,QAAN,CAAe,iBAAf;AACF;AACD,KARY,CAAb;AAUA,WAAO;AACL,MAAA,OAAO,EAAP,OADK;AAEL,MAAA,IAAG,EAAH;AAFK,KAAP;AAID;AAtCY,CAAf","sourcesContent":["<template>\r\n  <Nav />\r\n  <div class=\"base-info\" v-if=\"info\">\r\n    <img :src=\"info.pic\" alt=\"\" @click=\"$router.push('/updateperson')\"/>\r\n    <p>{{info.name}}</p>\r\n  </div>\r\n  <van-cell-group>\r\n    <van-cell title=\"我的收藏\" is-link url=\"#/store\" />\r\n    <van-cell title=\"退出登录\" @click=\"signout\" />\r\n  </van-cell-group>\r\n</template>\r\n\r\n<script>\r\nimport Nav from \"@/components/Nav.vue\";\r\nimport { onBeforeMount, computed } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport { Toast } from \"vant\";\r\n\r\nexport default {\r\n  components: { Nav },\r\n  name: \"Person\",\r\n  setup() {\r\n    const store = useStore();\r\n    const router = useRouter();\r\n    const signout = () => {\r\n      Toast(\"小主，您已经安全退出~\");\r\n      localStorage.removeItem(\"token\");\r\n      store.commit(\"changeIsLogin\", null);\r\n      store.commit(\"changeInfo\", null);\r\n      store.commit('changeStoreList', null);\r\n      router.replace(\"/login\");\r\n    };\r\n    // 计算属性vuex中的用户的所有信息\r\n    let info = computed(() => {\r\n      let { isLogin, info} = store.state;\r\n      if(isLogin && info) {\r\n        return info;\r\n      }\r\n      return null;\r\n    })\r\n\r\n    // 渲染之前获得用户的 isLogin / info，并存储到vuex中\r\n    onBeforeMount(() => {\r\n      let {isLogin, info} = store.state;\r\n      if(isLogin === null) {\r\n        store.dispatch('changeAsyncIsLogin')\r\n      }\r\n      if(info === null) {\r\n        store.dispatch('changeAsyncInfo')\r\n      }\r\n    })\r\n\r\n    return {\r\n      signout,\r\n      info\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.base-info {\r\n  box-sizing: border-box;\r\n  margin: 20px 0;\r\n\r\n  img {\r\n    display: block;\r\n    margin: 0 auto;\r\n    width: 86px;\r\n    height: 86px;\r\n    border-radius: 50%;\r\n  }\r\n\r\n  p {\r\n    line-height: 50px;\r\n    font-size: 18px;\r\n    text-align: center;\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}