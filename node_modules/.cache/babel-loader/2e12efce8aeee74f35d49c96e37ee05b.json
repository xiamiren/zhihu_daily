{"remainingRequest":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\router\\index.js","dependencies":[{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\router\\index.js","mtime":1660479574903},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\babel.config.js","mtime":1658239012002},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1658554939499},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\babel-loader\\lib\\index.js","mtime":1658554870645},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\eslint-loader\\index.js","mtime":1658554930941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL0phbWVzL0Rlc2t0b3Ava2VqaWFuL3Z1ZTNcdTc3RTVcdTRFNEVcdTY1RTVcdTYyQTUvemhpaHUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0IHsgY3JlYXRlUm91dGVyLCBjcmVhdGVXZWJIYXNoSGlzdG9yeSB9IGZyb20gInZ1ZS1yb3V0ZXIiOwppbXBvcnQgcm91dGVzIGZyb20gIi4vcm91dGVzIjsKaW1wb3J0IGFwaSBmcm9tICJAL2FwaSI7CmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlIjsKaW1wb3J0IHsgVG9hc3QgfSBmcm9tICJ2YW50IjsKdmFyIHJvdXRlciA9IGNyZWF0ZVJvdXRlcih7CiAgaGlzdG9yeTogY3JlYXRlV2ViSGFzaEhpc3RvcnkoKSwKICByb3V0ZXM6IHJvdXRlcwp9KTsgLy8g5aaC5p6c6Lez6L2s5Yiw6aG16Z2i5pivKOS4quS6uuS4reW/gyznvJbovpHkuKrkurrkv6Hmga8sIOaUtuiXjynlgZrmi6bmiKoKCnJvdXRlci5iZWZvcmVFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgYXJyLCBpc0xvZ2luLCBfeWllbGQkYXBpJGNoZWNrTG9naW4sIGNvZGUsIGRhdGE7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBhcnIgPSBbIi9wZXJzb24iLCAiL3VwZGF0ZXBlcnNvbiIsICJzdG9yZSJdOwoKICAgICAgICAgICAgaWYgKCFhcnIuaW5jbHVkZXModG8ucGF0aCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOagoemqjOaYr+WQpueZu+W9lQogICAgICAgICAgICBpc0xvZ2luID0gc3RvcmUuc3RhdGUuaXNMb2dpbjsKCiAgICAgICAgICAgIGlmICghaXNMb2dpbikgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXh0KCk7IC8v5bey55m75b2VLOS4jeWBmuaLpuaIqgoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBpZiAoIShpc0xvZ2luID09PSBmYWxzZSkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFRvYXN0KCLlsI/kuLvvvIzor7fmgqjlhYjnmbvlvZXlk6Z+Iik7CiAgICAgICAgICAgIG5leHQoIi9sb2dpbiIpOyAvL+acqueZu+W9lSzlhYjot7PovazliLDnmbvlvZXpobUs6L+b6KGM55m75b2VCgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBpZiAoIShpc0xvZ2luID09PSBudWxsKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgIHJldHVybiBhcGkuY2hlY2tMb2dpbigpOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIF95aWVsZCRhcGkkY2hlY2tMb2dpbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGNvZGUgPSBfeWllbGQkYXBpJGNoZWNrTG9naW4uY29kZTsKICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRhcGkkY2hlY2tMb2dpbi5kYXRhOwoKICAgICAgICAgICAgaWYgKCEoK2NvZGUgIT09IDApKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBUb2FzdCgi5bCP5Li777yM6K+35oKo5YWI55m75b2V5ZOmfiIpOwogICAgICAgICAgICBuZXh0KCIvbG9naW4iKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJjaGFuZ2VJc0xvZ2luIiwgdHJ1ZSk7CiAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgiY2hhbmdlSW5mbyIsIGRhdGEpOwogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyODsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI2OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDExKTsKCiAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICBuZXh0KCk7CgogICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzExLCAyNl1dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["C:/Users/James/Desktop/kejian/vue3知乎日报/zhihu/src/router/index.js"],"names":["createRouter","createWebHashHistory","routes","api","store","Toast","router","history","beforeEach","to","from","next","arr","includes","path","isLogin","state","checkLogin","code","data","commit"],"mappings":";;;;AAAA,SAASA,YAAT,EAAuBC,oBAAvB,QAAmD,YAAnD;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,KAAT,QAAsB,MAAtB;AAEA,IAAMC,MAAM,GAAGN,YAAY,CAAC;AAC1BO,EAAAA,OAAO,EAAEN,oBAAoB,EADH;AAE1BC,EAAAA,MAAM,EAANA;AAF0B,CAAD,CAA3B,C,CAIA;;AACAI,MAAM,CAACE,UAAP;AAAA,qEAAkB,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACZC,YAAAA,GADY,GACN,CAAC,SAAD,EAAY,eAAZ,EAA6B,OAA7B,CADM;;AAAA,iBAEZA,GAAG,CAACC,QAAJ,CAAaJ,EAAE,CAACK,IAAhB,CAFY;AAAA;AAAA;AAAA;;AAGd;AACIC,YAAAA,OAJU,GAIAX,KAAK,CAACY,KAAN,CAAYD,OAJZ;;AAAA,iBAKVA,OALU;AAAA;AAAA;AAAA;;AAMZJ,YAAAA,IAAI,GANQ,CAMJ;;AANI;;AAAA;AAAA,kBASVI,OAAO,KAAK,KATF;AAAA;AAAA;AAAA;;AAUZV,YAAAA,KAAK,CAAC,YAAD,CAAL;AACAM,YAAAA,IAAI,CAAC,QAAD,CAAJ,CAXY,CAWI;;AAXJ;;AAAA;AAAA,kBAcVI,OAAO,KAAK,IAdF;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,mBAiBiBZ,GAAG,CAACc,UAAJ,EAjBjB;;AAAA;AAAA;AAiBJC,YAAAA,IAjBI,yBAiBJA,IAjBI;AAiBEC,YAAAA,IAjBF,yBAiBEA,IAjBF;;AAAA,kBAkBN,CAACD,IAAD,KAAU,CAlBJ;AAAA;AAAA;AAAA;;AAmBRb,YAAAA,KAAK,CAAC,YAAD,CAAL;AACAM,YAAAA,IAAI,CAAC,QAAD,CAAJ;AApBQ;;AAAA;AAuBVP,YAAAA,KAAK,CAACgB,MAAN,CAAa,eAAb,EAA8B,IAA9B;AACAhB,YAAAA,KAAK,CAACgB,MAAN,CAAa,YAAb,EAA2BD,IAA3B;AACAR,YAAAA,IAAI;AAzBM;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AA+BhBA,YAAAA,IAAI;;AA/BY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA;AAAA;AAAA;AAAA;AAkCA,eAAeL,MAAf","sourcesContent":["import { createRouter, createWebHashHistory } from \"vue-router\";\r\nimport routes from \"./routes\";\r\nimport api from \"@/api\";\r\nimport store from \"@/store\";\r\nimport { Toast } from \"vant\";\r\n\r\nconst router = createRouter({\r\n  history: createWebHashHistory(),\r\n  routes,\r\n});\r\n// 如果跳转到页面是(个人中心,编辑个人信息, 收藏)做拦截\r\nrouter.beforeEach(async (to, from, next) => {\r\n  let arr = [\"/person\", \"/updateperson\", \"store\"];\r\n  if (arr.includes(to.path)) {\r\n    // 校验是否登录\r\n    let isLogin = store.state.isLogin;\r\n    if (isLogin) {\r\n      next(); //已登录,不做拦截\r\n      return;\r\n    }\r\n    if (isLogin === false) {\r\n      Toast(\"小主，请您先登录哦~\");\r\n      next(\"/login\"); //未登录,先跳转到登录页,进行登录\r\n      return;\r\n    }\r\n    if (isLogin === null) {\r\n      //如果为null 跳转登录页  同时调取接口校验是否登录 通过commi同步vuex管理的状态\r\n      try {\r\n        let { code, data } = await api.checkLogin();\r\n        if (+code !== 0) {\r\n          Toast(\"小主，请您先登录哦~\");\r\n          next(\"/login\");\r\n          return;\r\n        }\r\n        store.commit(\"changeIsLogin\", true);\r\n        store.commit(\"changeInfo\", data);\r\n        next();\r\n      } catch (error) {}\r\n      return;\r\n    }\r\n  }\r\n\r\n  next();\r\n});\r\n\r\nexport default router;\r\n"]}]}