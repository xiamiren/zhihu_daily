{"remainingRequest":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\pages\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\pages\\Login.vue","mtime":1658979157304},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\babel.config.js","mtime":1658239012002},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1658554939499},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\babel-loader\\lib\\index.js","mtime":1658554870645},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1658554939499},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1658554910597}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvSmFtZXMvRGVza3RvcC9rZWppYW4vdnVlM1x1NzdFNVx1NEU0RVx1NjVFNVx1NjJBNS96aGlodS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9KYW1lcy9EZXNrdG9wL2tlamlhbi92dWUzXHU3N0U1XHU0RTRFXHU2NUU1XHU2MkE1L3poaWh1L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IE5hdiBmcm9tICJAL2NvbXBvbmVudHMvTmF2LnZ1ZSI7CmltcG9ydCB7IHJlYWN0aXZlLCB0b1JlZnMsIHJlZiB9IGZyb20gInZ1ZSI7CmltcG9ydCBhcGkgZnJvbSAiLi4vYXBpL2luZGV4IjsKaW1wb3J0IHsgVG9hc3QgfSBmcm9tICJ2YW50IjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgdXNlUm91dGVyLCB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTmF2OiBOYXYKICB9LAogIG5hbWU6ICJMb2dpbiIsCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKSwKICAgICAgICByb3V0ZXIgPSB1c2VSb3V0ZXIoKSwKICAgICAgICByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgICB2YXIgc3RhdGUgPSByZWFjdGl2ZSh7CiAgICAgIHBob25lOiAiIiwKICAgICAgY29kZTogIiIsCiAgICAgIGVuYWJsZTogdHJ1ZSwKICAgICAgdGltZTogIjYwcyIKICAgIH0pOwogICAgdmFyIGZvcm1Cb3ggPSByZWYobnVsbCk7IC8vIOWPkemAgemqjOivgeeggQoKICAgIHZhciBzZW5kY29kZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfeWllbGQkYXBpJHBob25lQ29kZSwgY29kZSwgbiwgdGltZXI7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybUJveC52YWx1ZS52YWxpZGF0ZSgicGhvbmUiKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBpLnBob25lQ29kZShzdGF0ZS5waG9uZSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF95aWVsZCRhcGkkcGhvbmVDb2RlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGNvZGUgPSBfeWllbGQkYXBpJHBob25lQ29kZS5jb2RlOwoKICAgICAgICAgICAgICAgIGlmICghKCtjb2RlICE9PSAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIFRvYXN0KCLlvZPliY3nvZHnu5znuYHlv5nvvIzor7fnqI3lkI7lho3or5XvvIEiKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgLy8g5byA5ZCv5YCS6K6h5pe2CiAgICAgICAgICAgICAgICBzdGF0ZS5lbmFibGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHN0YXRlLnRpbWUgPSAiMTBzIjsKICAgICAgICAgICAgICAgIG4gPSAxMDsKICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBuLS07CgogICAgICAgICAgICAgICAgICBpZiAobiA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLmVuYWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBzdGF0ZS50aW1lID0gIiIuY29uY2F0KG4sICJzIik7CiAgICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE2OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTZdXSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBzZW5kY29kZSgpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOyAvLyDooajljZXmj5DkuqQKCgogICAgdmFyIHN1Ym1pdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIF95aWVsZCRhcGkkbG9naW4sIGNvZGUsIHRva2VuLCBmcm9tOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5sb2dpbihzdGF0ZS5waG9uZSwgc3RhdGUuY29kZSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF95aWVsZCRhcGkkbG9naW4gPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGNvZGUgPSBfeWllbGQkYXBpJGxvZ2luLmNvZGU7CiAgICAgICAgICAgICAgICB0b2tlbiA9IF95aWVsZCRhcGkkbG9naW4udG9rZW47CgogICAgICAgICAgICAgICAgaWYgKCEoK2NvZGUgIT09IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIFRvYXN0KCflsI/kuLvlvojpgZfmhr7vvIzlvZPliY3nmbvlvZXlpLHotKXkuoYhJyk7CiAgICAgICAgICAgICAgICBmb3JtQm94LnZhbHVlLnJlc2V0VmFsaWRhdGlvbigpOwogICAgICAgICAgICAgICAgc3RhdGUuY29kZSA9ICcnOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgLy8g5a2Y5YKodG9rZW7kv6Hmga8KICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuKTsgLy8g5a2Y5YKo5piv5ZCm55m75b2V55qE54q25oCBCgogICAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCdjaGFuZ2VJc0xvZ2luJywgdHJ1ZSk7IC8vIOWtmOWCqOiOt+WPluWIsOeahOeZu+W9leeahOS/oeaBrwoKICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdjaGFuZ2VBc3luY0luZm8nKTsgLy8g5riF6ZmkdnVleOS4reW3suacieeahHN0b3JlbGlzdOeahOS/oeaBrwoKICAgICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgnY2hhbmdlU3RvcmVMaXN0JywgbnVsbCk7CiAgICAgICAgICAgICAgICBUb2FzdCgn5bCP5Li755yf5qOS77yM5b2T5YmN55m75b2V5oiQ5Yqf5LqGIScpOwogICAgICAgICAgICAgICAgZnJvbSA9IHJvdXRlLnF1ZXJ5LmZyb207IC8vIHJvdXRl5Lit5aaC5p6c5pyJZnJvbei3s+i9rOWIsGZyb23vvIzmsqHmnIlmcm9t6Lez6L2s5Yiw5Liq5Lq65Lit5b+DCgogICAgICAgICAgICAgICAgaWYgKCFmcm9tKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJvdXRlci5yZXBsYWNlKCIvIi5jb25jYXQoZnJvbSkpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgcm91dGVyLnJlcGxhY2UoIi9wZXJzb24iKTsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdG9SZWZzKHN0YXRlKSksIHt9LCB7CiAgICAgIGZvcm1Cb3g6IGZvcm1Cb3gsCiAgICAgIHJlZ1Bob25lOiAvXjFcZHsxMH0vLAogICAgICByZWdDb2RlOiAvXGR7Nn0vLAogICAgICBzZW5kY29kZTogc2VuZGNvZGUsCiAgICAgIHN1Ym1pdDogc3VibWl0CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\pages\\Login.vue"],"names":[],"mappings":";;;;;AAkDA,OAAO,GAAP,MAAgB,sBAAhB;AACA,SAAS,QAAT,EAAmB,MAAnB,EAA2B,GAA3B,QAAsC,KAAtC;AACA,OAAO,GAAP,MAAgB,cAAhB;AACA,SAAS,KAAT,QAAsB,MAAtB;AACA,SAAS,QAAT,QAAwB,MAAxB;AACA,SAAO,SAAP,EAAkB,QAAlB,QAAiC,YAAjC;AACA,eAAe;AACb,EAAA,UAAU,EAAE;AAAE,IAAA,GAAE,EAAF;AAAF,GADC;AAEb,EAAA,IAAI,EAAE,OAFO;AAGb,EAAA,KAHa,mBAGL;AACN,QAAM,KAAI,GAAI,QAAQ,EAAtB;AAAA,QACC,MAAK,GAAI,SAAS,EADnB;AAAA,QAEC,KAAI,GAAI,QAAQ,EAFjB;AAIA,QAAI,KAAI,GAAI,QAAQ,CAAC;AACnB,MAAA,KAAK,EAAE,EADY;AAEnB,MAAA,IAAI,EAAE,EAFa;AAGnB,MAAA,MAAM,EAAE,IAHW;AAInB,MAAA,IAAI,EAAE;AAJa,KAAD,CAApB;AAMA,QAAI,OAAM,GAAI,GAAG,CAAC,IAAD,CAAjB,CAXM,CAYN;;AACA,QAAM,QAAO;AAAA,yEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAGP,OAAO,CAAC,KAAR,CAAc,QAAd,CAAuB,OAAvB,CAHO;;AAAA;AAAA;AAAA,uBAKQ,GAAG,CAAC,SAAJ,CAAc,KAAK,CAAC,KAApB,CALR;;AAAA;AAAA;AAKP,gBAAA,IALO,wBAKP,IALO;;AAAA,sBAMT,CAAC,IAAD,KAAU,CAND;AAAA;AAAA;AAAA;;AAOX,gBAAA,KAAK,CAAC,eAAD,CAAL;AAPW;;AAAA;AAUb;AACA,gBAAA,KAAK,CAAC,MAAN,GAAe,KAAf;AACA,gBAAA,KAAK,CAAC,IAAN;AACI,gBAAA,CAbS,GAaL,EAbK;AAcT,gBAAA,KAdS,GAcD,WAAW,CAAC,YAAM;AAC5B,kBAAA,CAAC;;AACD,sBAAI,CAAA,KAAM,CAAV,EAAa;AACX,oBAAA,aAAa,CAAC,KAAD,CAAb;AACA,oBAAA,KAAK,CAAC,MAAN,GAAe,IAAf;AACA;AACF;;AACA,kBAAA,KAAK,CAAC,IAAN,aAAgB,CAAhB;AACD,iBARsB,EAQpB,IARoB,CAdV;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAP,QAAO;AAAA;AAAA;AAAA,OAAb,CAbM,CAsCN;;;AACA,QAAM,MAAK;AAAA,0EAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEe,GAAG,CAAC,KAAJ,CAAU,KAAK,CAAC,KAAhB,EAAuB,KAAK,CAAC,IAA7B,CAFf;;AAAA;AAAA;AAEP,gBAAA,IAFO,oBAEP,IAFO;AAED,gBAAA,KAFC,oBAED,KAFC;;AAAA,sBAIV,CAAC,IAAD,KAAU,CAJA;AAAA;AAAA;AAAA;;AAKX,gBAAA,KAAK,CAAC,gBAAD,CAAL;AACA,gBAAA,OAAO,CAAC,KAAR,CAAc,eAAd;AACA,gBAAA,KAAK,CAAC,IAAN,GAAa,EAAb;AAPW;;AAAA;AAUb;AACA,gBAAA,YAAY,CAAC,OAAb,CAAqB,OAArB,EAA8B,KAA9B,EAXa,CAYb;;AACA,gBAAA,KAAK,CAAC,MAAN,CAAa,eAAb,EAA8B,IAA9B,EAba,CAcb;;AACA,gBAAA,KAAK,CAAC,QAAN,CAAe,iBAAf,EAfa,CAgBb;;AACA,gBAAA,KAAK,CAAC,MAAN,CAAa,iBAAb,EAAgC,IAAhC;AACA,gBAAA,KAAK,CAAC,eAAD,CAAL;AACI,gBAAA,IAnBS,GAmBF,KAAK,CAAC,KAAN,CAAY,IAnBV,EAoBb;;AApBa,qBAqBV,IArBU;AAAA;AAAA;AAAA;;AAsBX,gBAAA,MAAM,CAAC,OAAP,YAAmB,IAAnB;AAtBW;;AAAA;AAyBb,gBAAA,MAAM,CAAC,OAAP;;AAzBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAL,MAAK;AAAA;AAAA;AAAA,OAAX;;AA4BA,2CACK,MAAM,CAAC,KAAD,CADX;AAEE,MAAA,OAAO,EAAP,OAFF;AAGE,MAAA,QAAQ,EAAE,UAHZ;AAIE,MAAA,OAAO,EAAE,OAJX;AAKE,MAAA,QAAQ,EAAR,QALF;AAME,MAAA,MAAM,EAAN;AANF;AAQD;AA9EY,CAAf","sourcesContent":["<template>\r\n  <Nav />\r\n  <van-form ref=\"formBox\" @submit=\"submit\">\r\n    <van-cell-group inset>\r\n      <!-- 手机号 -->\r\n      <van-field\r\n        v-model=\"phone\"\r\n        center\r\n        label=\"手机号\"\r\n        label-width=\"50px\"\r\n        name=\"phone\"\r\n        :rules=\"[\r\n          { required: true, message: '手机号为必填项' },\r\n          { pattern: regPhone, message: '手机号格式不对哦~' },\r\n        ]\"\r\n      >\r\n        <template #button>\r\n          <van-button\r\n            size=\"small\"\r\n            :type=\"enable ? 'primary' : ''\"\r\n            @click=\"sendcode\"\r\n            class=\"form-btn\"\r\n            :disabled=\"!enable\"\r\n          >\r\n            {{ enable ? \"发送验证码\" : time }}\r\n          </van-button>\r\n        </template>\r\n      </van-field>\r\n      <!-- 验证码 -->\r\n      <van-field\r\n        v-model=\"code\"\r\n        label=\"验证码\"\r\n        label-width=\"50px\"\r\n        :rules=\"[\r\n          { required: true, message: '验证码为必填项' },\r\n          { pattern: regCode, message: '验证码必须是六位数字哦' },\r\n        ]\"\r\n      />\r\n    </van-cell-group>\r\n\r\n    <!-- 登录/注册按钮 -->\r\n    <div style=\"margin: 20px 40px\">\r\n      <van-button round block type=\"primary\" native-type=\"submit\">\r\n        立即登录/注册\r\n      </van-button>\r\n    </div>\r\n  </van-form>\r\n</template>\r\n\r\n<script>\r\nimport Nav from \"@/components/Nav.vue\";\r\nimport { reactive, toRefs, ref } from \"vue\";\r\nimport api from \"../api/index\";\r\nimport { Toast } from \"vant\";\r\nimport { useStore} from 'vuex';\r\nimport{useRouter, useRoute} from 'vue-router'\r\nexport default {\r\n  components: { Nav },\r\n  name: \"Login\",\r\n  setup() {\r\n    const store = useStore(),\r\n     router = useRouter(),\r\n     route = useRoute();\r\n\r\n    let state = reactive({\r\n      phone: \"\",\r\n      code: \"\",\r\n      enable: true,\r\n      time: \"60s\",\r\n    });\r\n    let formBox = ref(null);\r\n    // 发送验证码\r\n    const sendcode = async () => {\r\n      try {\r\n        // 校验手机号\r\n        await formBox.value.validate(\"phone\");\r\n        // 发送请求\r\n        let { code } = await api.phoneCode(state.phone);\r\n        if (+code !== 0) {\r\n          Toast(\"当前网络繁忙，请稍后再试！\");\r\n          return;\r\n        }\r\n        // 开启倒计时\r\n        state.enable = false;\r\n        state.time = `10s`;\r\n        let n = 10;\r\n        let timer = setInterval(() => {\r\n          n--;\r\n          if (n === 0) {\r\n            clearInterval(timer);\r\n            state.enable = true;\r\n            return;\r\n          }\r\n          state.time = `${n}s`;\r\n        }, 1000);\r\n      } catch (error) {}\r\n    };\r\n    // 表单提交\r\n    const submit = async () => {\r\n      // 登录\r\n      let { code, token } = await api.login(state.phone, state.code);\r\n      // 通过code，验证是否登录成功\r\n      if(+code !== 0) {\r\n        Toast('小主很遗憾，当前登录失败了!');\r\n        formBox.value.resetValidation();\r\n        state.code = '';\r\n        return;\r\n      }\r\n      // 存储token信息\r\n      localStorage.setItem('token', token);\r\n      // 存储是否登录的状态\r\n      store.commit('changeIsLogin', true);\r\n      // 存储获取到的登录的信息\r\n      store.dispatch('changeAsyncInfo')\r\n      // 清除vuex中已有的storelist的信息\r\n      store.commit('changeStoreList', null);\r\n      Toast('小主真棒，当前登录成功了!');\r\n      let from = route.query.from;\r\n      // route中如果有from跳转到from，没有from跳转到个人中心\r\n      if(from) {\r\n        router.replace(`/${from}`);\r\n        return;\r\n      }\r\n      router.replace(`/person`);\r\n    };\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      formBox,\r\n      regPhone: /^1\\d{10}/,\r\n      regCode: /\\d{6}/,\r\n      sendcode,\r\n      submit,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.van-form {\r\n  margin-top: 30px;\r\n\r\n  .form-btn {\r\n    width: 78px;\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}