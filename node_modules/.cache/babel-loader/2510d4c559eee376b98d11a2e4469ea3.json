{"remainingRequest":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\pages\\UpdatePerson.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\pages\\UpdatePerson.vue","mtime":1658239035094},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\babel.config.js","mtime":1658239012002},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1658554939499},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\babel-loader\\lib\\index.js","mtime":1658554870645},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1658554939499},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1658554910597}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvSmFtZXMvRGVza3RvcC9rZWppYW4vdnVlM1x1NzdFNVx1NEU0RVx1NjVFNVx1NjJBNS96aGlodS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9KYW1lcy9EZXNrdG9wL2tlamlhbi92dWUzXHU3N0U1XHU0RTRFXHU2NUU1XHU2MkE1L3poaWh1L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCBOYXYgZnJvbSAiQC9jb21wb25lbnRzL05hdi52dWUiOwppbXBvcnQgeyByZWFjdGl2ZSwgdG9SZWZzIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgVG9hc3QgfSBmcm9tICJ2YW50IjsKaW1wb3J0IGFwaSBmcm9tICJAL2FwaS9pbmRleCI7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gInZ1ZS1yb3V0ZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTmF2OiBOYXYKICB9LAogIG5hbWU6ICJVcGRhdGVQZXJzb24iLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBzdG9yZSA9IHVzZVN0b3JlKCksCiAgICAgICAgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICB2YXIgbmFtZSA9IHN0b3JlLnN0YXRlLmluZm8ubmFtZTsKICAgIHZhciBzdGF0ZSA9IHJlYWN0aXZlKHsKICAgICAgbmFtZTogbmFtZSwKICAgICAgcGljOiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH0pOwoKICAgIHZhciBzdWJtaXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgbmFtZSwgcGljLCByZWcsIF95aWVsZCRhcGkkdXNlclVwZGF0ZSwgY29kZSwgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5sb2FkaW5nKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgc3RhdGUubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBuYW1lID0gc3RhdGUubmFtZSwgcGljID0gc3RhdGUucGljLCByZWcgPSAvXltcd1x1NGUwMC1cdTlmYTVdKyQvOyAvLyDmoLzlvI/moKHpqowKCiAgICAgICAgICAgICAgICBpZiAocmVnLnRlc3QobmFtZSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIFRvYXN0KCLlsI/kuLvvvIznlKjmiLflkI3ovpPlhaXplJnor69+Iik7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaWYgKCEocGljLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBUb2FzdCgi5bCP5Li777yM5b+F6aG75LiK5Lyg5LiA5byg5Zu+54mHfiIpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBpLnVzZXJVcGRhdGUobmFtZSwgcGljWzBdLmZpbGUpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX3lpZWxkJGFwaSR1c2VyVXBkYXRlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGNvZGUgPSBfeWllbGQkYXBpJHVzZXJVcGRhdGUuY29kZTsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkYXBpJHVzZXJVcGRhdGUuZGF0YTsKCiAgICAgICAgICAgICAgICBpZiAoISgrY29kZSAhPT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBUb2FzdCgi5bCP5Li777yM5L+h5oGv5L+u5pS55aSx6LSl77yM6K+356iN5ZCO5YaN6K+VfiIpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBUb2FzdCgi5bCP5Li75aSq5qOS5ZWm77yM5L+h5oGv5L+u5pS55oiQ5YqffiIpOwogICAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJjaGFuZ2VJbmZvIiwgZGF0YSk7CiAgICAgICAgICAgICAgICByb3V0ZXIucmVwbGFjZSgiL3BlcnNvbiIpOwogICAgICAgICAgICAgICAgc3RhdGUubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0b1JlZnMoc3RhdGUpKSwge30sIHsKICAgICAgc3VibWl0OiBzdWJtaXQKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\pages\\UpdatePerson.vue"],"names":[],"mappings":";;;;;;AA6BA,OAAO,GAAP,MAAgB,sBAAhB;AACA,SAAS,QAAT,EAAmB,MAAnB,QAAiC,KAAjC;AACA,SAAS,QAAT,QAAyB,MAAzB;AACA,SAAS,KAAT,QAAsB,MAAtB;AACA,OAAO,GAAP,MAAgB,aAAhB;AACA,SAAS,SAAT,QAA0B,YAA1B;AAEA,eAAe;AACb,EAAA,UAAU,EAAE;AAAE,IAAA,GAAE,EAAF;AAAF,GADC;AAEb,EAAA,IAAI,EAAE,cAFO;AAGb,EAAA,KAHa,mBAGL;AACN,QAAM,KAAI,GAAI,QAAQ,EAAtB;AAAA,QACE,MAAK,GAAI,SAAS,EADpB;AAGA,QAAM,IAAN,GAAe,KAAK,CAAC,KAAN,CAAY,IAA3B,CAAM,IAAN;AACA,QAAI,KAAI,GAAI,QAAQ,CAAC;AACnB,MAAA,IAAI,EAAJ,IADmB;AAEnB,MAAA,GAAG,EAAE,EAFc;AAGnB,MAAA,OAAO,EAAE;AAHU,KAAD,CAApB;;AAMA,QAAM,MAAK;AAAA,yEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,qBACT,KAAK,CAAC,OADG;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAEb,gBAAA,KAAK,CAAC,OAAN,GAAgB,IAAhB;AAEM,gBAAA,IAJO,GAIO,KAJP,CAIP,IAJO,EAID,GAJC,GAIO,KAJP,CAID,GAJC,EAKX,GALW,GAKL,sBALK,EAMb;;AANa,oBAOR,GAAG,CAAC,IAAJ,CAAS,IAAT,CAPQ;AAAA;AAAA;AAAA;;AAQX,gBAAA,KAAK,CAAC,aAAD,CAAL;AARW;;AAAA;AAAA,sBAWT,GAAG,CAAC,MAAJ,KAAe,CAXN;AAAA;AAAA;AAAA;;AAYX,gBAAA,KAAK,CAAC,cAAD,CAAL;AAZW;;AAAA;AAAA;AAAA,uBAgBc,GAAG,CAAC,UAAJ,CAAe,IAAf,EAAqB,GAAG,CAAC,CAAD,CAAH,CAAO,IAA5B,CAhBd;;AAAA;AAAA;AAgBP,gBAAA,IAhBO,yBAgBP,IAhBO;AAgBD,gBAAA,IAhBC,yBAgBD,IAhBC;;AAAA,sBAiBT,CAAC,IAAD,KAAU,CAjBD;AAAA;AAAA;AAAA;;AAkBX,gBAAA,KAAK,CAAC,kBAAD,CAAL;AAlBW;;AAAA;AAqBb,gBAAA,KAAK,CAAC,eAAD,CAAL;AACA,gBAAA,KAAK,CAAC,MAAN,CAAa,YAAb,EAA2B,IAA3B;AACA,gBAAA,MAAM,CAAC,OAAP,CAAe,SAAf;AAEA,gBAAA,KAAK,CAAC,OAAN,GAAgB,KAAhB;;AAzBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAL,MAAK;AAAA;AAAA;AAAA,OAAX;;AA4BA,2CACK,MAAM,CAAC,KAAD,CADX;AAEE,MAAA,MAAM,EAAN;AAFF;AAID;AA9CY,CAAf","sourcesContent":["<template>\n  <Nav />\n  <div class=\"form-box\">\n    <van-cell-group inset>\n      <van-field v-model=\"name\" label=\"用户名\" label-width=\"60px\" />\n\n      <van-field label=\"用户头像\" label-width=\"60px\">\n        <template #input>\n          <van-uploader v-model=\"pic\" max-count=\"1\" />\n        </template>\n      </van-field>\n    </van-cell-group>\n\n    <div style=\"margin: 20px 40px\">\n      <van-button\n        :loading=\"loading\"\n        loading-text=\"处理中...\"\n        round\n        block\n        type=\"primary\"\n        @click=\"submit\"\n      >\n        修改信息\n      </van-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Nav from \"@/components/Nav.vue\";\nimport { reactive, toRefs } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { Toast } from \"vant\";\nimport api from \"@/api/index\";\nimport { useRouter } from \"vue-router\";\n\nexport default {\n  components: { Nav },\n  name: \"UpdatePerson\",\n  setup() {\n    const store = useStore(),\n      router = useRouter();\n\n    let { name } = store.state.info;\n    let state = reactive({\n      name,\n      pic: [],\n      loading: false,\n    });\n\n    const submit = async () => {\n      if (state.loading) return;\n      state.loading = true;\n\n      let { name, pic } = state,\n        reg = /^[\\w\\u4e00-\\u9fa5]+$/;\n      // 格式校验\n      if (!reg.test(name)) {\n        Toast(\"小主，用户名输入错误~\");\n        return;\n      }\n      if (pic.length === 0) {\n        Toast(\"小主，必须上传一张图片~\");\n        return;\n      }\n      // 提交数据给服务器\n      let { code, data } = await api.userUpdate(name, pic[0].file);\n      if (+code !== 0) {\n        Toast(\"小主，信息修改失败，请稍后再试~\");\n        return;\n      }\n      Toast(\"小主太棒啦，信息修改成功~\");\n      store.commit(\"changeInfo\", data);\n      router.replace(\"/person\");\n\n      state.loading = false;\n    };\n\n    return {\n      ...toRefs(state),\n      submit,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.form-box {\n  margin-top: 30px;\n}\n</style>"],"sourceRoot":""}]}