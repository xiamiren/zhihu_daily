{"remainingRequest":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\pages\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\pages\\Login.vue","mtime":1658239034690},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1658554939499},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\babel-loader\\lib\\index.js","mtime":1658554870645},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1658554939499},{"path":"C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1658554910597}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBOYXYgZnJvbSAiQC9jb21wb25lbnRzL05hdi52dWUiOwppbXBvcnQgeyByZWFjdGl2ZSwgdG9SZWZzLCByZWYgfSBmcm9tICJ2dWUiOwppbXBvcnQgYXBpIGZyb20gIkAvYXBpL2luZGV4IjsKaW1wb3J0IHsgVG9hc3QgfSBmcm9tICJ2YW50IjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgdXNlUm91dGVyLCB1c2VSb3V0ZSB9IGZyb20gInZ1ZS1yb3V0ZXIiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgTmF2IH0sCiAgbmFtZTogIkxvZ2luIiwKICBzZXR1cCgpIHsKICAgIGNvbnN0IHN0b3JlID0gdXNlU3RvcmUoKSwKICAgICAgcm91dGVyID0gdXNlUm91dGVyKCksCiAgICAgIHJvdXRlID0gdXNlUm91dGUoKTsKCiAgICBsZXQgZm9ybUJveCA9IHJlZihudWxsKTsKICAgIGxldCBzdGF0ZSA9IHJlYWN0aXZlKHsKICAgICAgcGhvbmU6ICIiLAogICAgICBjb2RlOiAiIiwKICAgICAgZW5hYmxlOiB0cnVlLAogICAgICB0aW1lOiAiNjBzIiwKICAgIH0pOwoKICAgIC8vIOWPkemAgemqjOivgeeggQogICAgY29uc3Qgc2VuZGNvZGUgPSBhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgLy8g5qCh6aqM5omL5py65Y+35qC85byPCiAgICAgICAgYXdhaXQgZm9ybUJveC52YWx1ZS52YWxpZGF0ZSgicGhvbmUiKTsKICAgICAgICAvLyDlj5HpgIHor7fmsYIKICAgICAgICBsZXQgeyBjb2RlIH0gPSBhd2FpdCBhcGkucGhvbmVDb2RlKHN0YXRlLnBob25lKTsKICAgICAgICBpZiAoK2NvZGUgIT09IDApIHsKICAgICAgICAgIFRvYXN0KCLlsI/kuLvvvIzlvZPliY3nvZHnu5znuYHlv5nvvIzor7fnqI3lkI7lho3or5Xlk6Z+Iik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIOW8gOWQr+aMiemSruWAkuiuoeaXtgogICAgICAgIHN0YXRlLmVuYWJsZSA9IGZhbHNlOwogICAgICAgIHN0YXRlLnRpbWUgPSBgMTBzYDsKICAgICAgICBsZXQgbiA9IDEwOwogICAgICAgIGxldCB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgIG4tLTsKICAgICAgICAgIGlmIChuID09PSAwKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICBzdGF0ZS5lbmFibGUgPSB0cnVlOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS50aW1lID0gYCR7bn1zYDsKICAgICAgICB9LCAxMDAwKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7fQogICAgfTsKCiAgICAvLyDooajljZXmj5DkuqQKICAgIGNvbnN0IHN1Ym1pdCA9IGFzeW5jICgpID0+IHsKICAgICAgbGV0IHsgY29kZSwgdG9rZW4gfSA9IGF3YWl0IGFwaS5sb2dpbihzdGF0ZS5waG9uZSwgc3RhdGUuY29kZSk7CiAgICAgIGlmICgrY29kZSAhPT0gMCkgewogICAgICAgIFRvYXN0KCLlsI/kuLvvvIzlvojpgZfmhr7vvIzlvZPliY3nmbvlvZXlpLHotKXkuoZ+Iik7CiAgICAgICAgZm9ybUJveC52YWx1ZS5yZXNldFZhbGlkYXRpb24oKTsKICAgICAgICBzdGF0ZS5jb2RlID0gIiI7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIHRva2VuKTsKICAgICAgc3RvcmUuY29tbWl0KCJjaGFuZ2VJc0xvZ2luIiwgdHJ1ZSk7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCJjaGFuZ2VJbmZvQXN5bmMiKTsKICAgICAgc3RvcmUuY29tbWl0KCJjaGFuZ2VTdG9yZUxpc3QiLCBudWxsKTsKICAgICAgVG9hc3QoIuWwj+S4u+ecn+ajku+8jOW9k+WJjeeZu+W9leaIkOWKn+WWvX4iKTsKCiAgICAgIC8vIOi3s+i9rOWIsOaMh+WumuWcsOWdgAogICAgICBsZXQgZnJvbSA9IHJvdXRlLnF1ZXJ5LmZyb207CiAgICAgIGlmIChmcm9tKSB7CiAgICAgICAgcm91dGVyLnJlcGxhY2UoYC8ke2Zyb219YCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJvdXRlci5yZXBsYWNlKGAvcGVyc29uYCk7CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIC4uLnRvUmVmcyhzdGF0ZSksCiAgICAgIGZvcm1Cb3gsCiAgICAgIHJlZ1Bob25lOiAvXjFcZHsxMH0kLywKICAgICAgcmVnQ29kZTogL15cZHs2fSQvLAogICAgICBzZW5kY29kZSwKICAgICAgc3VibWl0LAogICAgfTsKICB9LAp9Owo="},{"version":3,"sources":["C:\\Users\\James\\Desktop\\kejian\\vue3知乎日报\\zhihu\\src\\pages\\Login.vue"],"names":[],"mappings":"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","file":"C:/Users/James/Desktop/kejian/vue3知乎日报/zhihu/src/pages/Login.vue","sourceRoot":"","sourcesContent":["<template>\n  <Nav />\n  <van-form ref=\"formBox\" @submit=\"submit\">\n    <van-cell-group inset>\n      <van-field\n        v-model=\"phone\"\n        center\n        label=\"手机号\"\n        label-width=\"50px\"\n        name=\"phone\"\n        :rules=\"[\n          { required: true, message: '手机号为必填项哦~' },\n          { pattern: regPhone, message: '手机号格式不对哦~' },\n        ]\"\n      >\n        <template #button>\n          <van-button\n            size=\"small\"\n            :type=\"enable ? 'primary' : ''\"\n            class=\"form-btn\"\n            :disabled=\"!enable\"\n            @click=\"sendcode\"\n          >\n            {{ enable ? \"发送验证码\" : time }}\n          </van-button>\n        </template>\n      </van-field>\n\n      <van-field\n        v-model=\"code\"\n        label=\"验证码\"\n        label-width=\"50px\"\n        :rules=\"[\n          { required: true, message: '验证码为必填项哦~' },\n          { pattern: regCode, message: '验证码必须是6位数字哦~' },\n        ]\"\n      />\n    </van-cell-group>\n\n    <div style=\"margin: 20px 40px\">\n      <van-button round block type=\"primary\" native-type=\"submit\">\n        立即登录/注册\n      </van-button>\n    </div>\n  </van-form>\n</template>\n\n<script>\nimport Nav from \"@/components/Nav.vue\";\nimport { reactive, toRefs, ref } from \"vue\";\nimport api from \"@/api/index\";\nimport { Toast } from \"vant\";\nimport { useStore } from \"vuex\";\nimport { useRouter, useRoute } from \"vue-router\";\n\nexport default {\n  components: { Nav },\n  name: \"Login\",\n  setup() {\n    const store = useStore(),\n      router = useRouter(),\n      route = useRoute();\n\n    let formBox = ref(null);\n    let state = reactive({\n      phone: \"\",\n      code: \"\",\n      enable: true,\n      time: \"60s\",\n    });\n\n    // 发送验证码\n    const sendcode = async () => {\n      try {\n        // 校验手机号格式\n        await formBox.value.validate(\"phone\");\n        // 发送请求\n        let { code } = await api.phoneCode(state.phone);\n        if (+code !== 0) {\n          Toast(\"小主，当前网络繁忙，请稍后再试哦~\");\n          return;\n        }\n        // 开启按钮倒计时\n        state.enable = false;\n        state.time = `10s`;\n        let n = 10;\n        let timer = setInterval(() => {\n          n--;\n          if (n === 0) {\n            clearInterval(timer);\n            state.enable = true;\n            return;\n          }\n          state.time = `${n}s`;\n        }, 1000);\n      } catch (err) {}\n    };\n\n    // 表单提交\n    const submit = async () => {\n      let { code, token } = await api.login(state.phone, state.code);\n      if (+code !== 0) {\n        Toast(\"小主，很遗憾，当前登录失败了~\");\n        formBox.value.resetValidation();\n        state.code = \"\";\n        return;\n      }\n      localStorage.setItem(\"token\", token);\n      store.commit(\"changeIsLogin\", true);\n      store.dispatch(\"changeInfoAsync\");\n      store.commit(\"changeStoreList\", null);\n      Toast(\"小主真棒，当前登录成功喽~\");\n\n      // 跳转到指定地址\n      let from = route.query.from;\n      if (from) {\n        router.replace(`/${from}`);\n        return;\n      }\n      router.replace(`/person`);\n    };\n\n    return {\n      ...toRefs(state),\n      formBox,\n      regPhone: /^1\\d{10}$/,\n      regCode: /^\\d{6}$/,\n      sendcode,\n      submit,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.van-form {\n  margin-top: 30px;\n\n  .form-btn {\n    width: 78px;\n  }\n}\n</style>"]}]}